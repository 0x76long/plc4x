//
//  Licensed to the Apache Software Foundation (ASF) under one or more
//  contributor license agreements.  See the NOTICE file distributed with
//  this work for additional information regarding copyright ownership.
//  The ASF licenses this file to You under the Apache License, Version 2.0
//  (the "License"); you may not use this file except in compliance with
//  the License.  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.
//
:imagesdir: ../../images/
:icons: font

== S7 (Step7)

[cols="2,2a,5a"]
|===
|Name |Value |Description

|Code
2+|`s7`

|Name
2+|Siemens S7 Protocol

|Maven Dependency
2+|
----
<dependency>
  <groupId>org.apache.plc4x</groupId>
  <artifactId>plc4j-driver-s7</artifactId>
  <version>{current-last-released-version}</version>
</dependency>
----

|Default Transport:
2+|Â `tcp`

|Compatible Transports:
2+| - `tcp`
- `raw-socket`
- `pcap-replay`

3+|Supported Operations

|
| `read`
| Only supported with `tcp` transport.

|
| `write`
| Only supported with `tcp` transport.

|
| `subscribe`
| Generally supported with `tcp` transport with S7 devices of types: `S7 300`, `S7 400`, `S7 1500`.
With `raw-socket` and `pcap-replay` supported on all devices.

3+|Options

|
| `local-rack` (1)
| `Rack` value for the client (PLC4X device). Defaults to 1.

|
| `local-slot` (1)
| `Slot` value for the client (PLC4X device). Defaults to 1.

|
| `remote-rack` (0)
| `Rack` value for the remote (PLC). Defaults to 0.

|
| `remote-slot` (0)
| `Slot` value for the remote (PLC). Defaults to 0.

|
| `pdu-size` (1024)
| Maximum size of a data-packet sent to and received from the remote PLC.
During the connection process both parties will negotiate a maximum size both parties can work with and is equal or smaller than the given value is used.
The driver will automatically split up large requests to not exceed this value in a request or expected response.

|
| `max-amq-caller` (8)
| Maximum number of unconfirmed requests the PLC will accept in parallel before discarding with errors.
This parameter also will be negotiated during the connection process and the maximum both parties can work with and is equal or smaller than the given value is used.
The driver will automatically take care not exceeding this value while processing requests. Too many requests can cause a growing queue.

|
| `max-amq-callee` (8)
| Maximum number of unconfirmed responses or requests PLC4X will accept in parallel before discarding with errors.
This option is available for completeness and is correctly handled out during the connection process, however it is currently not enforced on PLC4X's side.
So if a PLC would send more messages than agreed upon, these would still be processed.

|
| `controller-type`
| As part of the connection process, usually the PLC4X S7 driver would try to identify the remote device.
However some devices seem to have problems with this and hang up or cause other problems.
In such a case, providing the `controller-type` will skip the identification process and hereby avoid this type of problem.
Possible values are:

- `S7_300`
- `S7_400`
- `S7_1200`
- `S7_1500`
- `LOGO`

|===
